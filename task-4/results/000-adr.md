**Название задачи:** ADR-0001. Реализация ETL обработки для TradeWare

**Автор:** Фарков Михаил

**Дата:** 12.11.2025

### Функциональные требования

| Код  | Описание                                                                             |
|------|--------------------------------------------------------------------------------------|
| F1   | Поддерживать загрузку CSV файлов через веб интерфейс                                 |
| F2   | Валидировать формат загружаемых файлов                                               |
| F3   | Загружать данные в GCS                                                               |
| F4   | Обновлять данными из БД загруженный CSV файл и загружать результат в БД номенклатуры |

### Нефункциональные требования

| Код | Требование                                                                                               |
|-----|----------------------------------------------------------------------------------------------------------|
| U1  | Внедрение системы централизованного сбора логов и метрик                                                 |
| P1  | 100-150 параллельных загрузок в пиковые часы                                                             |
| P2  | Среднее время обработки отчета на 2 000 строк составляет до 30 секунд                                    |

### Решение

- В качестве базового сценария принято решение использовать SpringBatch так как это позволит использовать текущую
  экспертизу команды.
- Масштабирование под возрастающую нагрузку можно обеспечить с применением Remote Chunking, что позволит удовлетворить
  заданным нефункциональным требованиям.

### Альтернативы

- В качестве основной альтернативы следует рассматривать Apache Airflow, как решение, которое позволит обеспечить
  масштабирование, а также позволит в перспективе реализовывать более сложные пайплайны по обработке данных.
- Также важным преимуществом Airflow является нативная поддержка выполнения в k8s.
- Использование Apache Spark видится нецелесообразным из-за высоких трудозатрат на разворачивание и поддержку.

### Недостатки, ограничения, риски

- К ключевым недостаткам предлагаемого решение следует отнести отсутствие параллелизма выполнения задач "из коробки".
  Создание необходимого пула воркеров потребует ручной настройки.
- Полностью автоматическое масштабирование под уровень текущей нагрузки также видится затруднительным.
